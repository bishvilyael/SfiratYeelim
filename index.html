<!DOCTYPE html>
<html lang="he">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ספירת יעלים</title>
   <title>כותרת שתופיע בפייסבוק</title>
  <meta name="description" content="קישורים והסברים">

  <!-- Open Graph לפייסבוק -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="ספירת יעלים">
  <meta property="og:description" content="קישורים והסברים">
  <meta property="og:url" content="https://bishvilyael.github.io/SfiratYeelim/">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">


  <style>
    body {
      margin: 0;
      background: #000;
      display: flex;
      justify-content: center;
    }

    .page {
      position: relative;
      width: 100%;
      max-width: 1920px;
      line-height: 0;
    }

    .page img {
      width: 100%;
      height: auto;
      display: block;
    }

    .link {
      position: absolute;
      display: block;
      background: transparent;
      cursor: pointer;
      outline: none;
    }
 
  <!-- שורות קיימות: meta, title, css וכו' -->

  <script>
  (function () {
    try {
      const u = new URL(window.location.href);
      if (u.searchParams.has('fbclid')) {
        u.searchParams.delete('fbclid');
        history.replaceState(null, document.title, u.toString());
      }
    } catch (e) {}
  })();
  </script>

  <!-- כל סקריפט אחר שלך מגיע אחרי זה -->

    /* מצב עריכה: מסגרות */
    .edit .link {
      outline: 2px solid rgba(255,0,0,0.7);
      background: rgba(255,0,0,0.10);
    }
  </style>
  
</head>

<body>
  <div class="page" id="page">
    <img src="Page.png" alt="page">

    <!-- מפה -->
    <a class="link" id="L3"
       href="https://www.google.com/maps/d/viewer?mid=1ZV3wyw_U2qiEHsuJ9LmLKnY8BGG57NU&femb=1&ll=31.628586918082146%2C34.60339190151444&z=15"
       target="_blank"
       style="left:34.0%; top:72.0%; width:60%; height:7%;"></a>

    <!-- סרטון -->
    <a class="link" id="L2"
       href="https://www.youtube.com/watch?v=42W4tm_5Flg"
       target="_blank"
       style="left:31.0%; top:82.0%; width:60%; height:7%;"></a>

      <!-- טופס -->
      <a class="link" id="L1"
         href="https://script.google.com/macros/s/AKfycbysN163oJgKTNwIeiPKTBrGyttUXUhPQglAucX0hrtlk9Va2GG8RoETbWEwCN6a7EzJ6Q/exec"
         target="_blank"
         style="left:28.0%; top:91.0%; width:60%; height:7%;">&nbsp;</a>
  </div>

  <script>
    // מצב עריכה רק אם יש ?edit=1 בכתובת
    const params = new URLSearchParams(location.search);
    const editMode = params.get('edit') === '1';

    if (editMode) {
      document.body.classList.add('edit');

      const page = document.getElementById('page');
      let selected = null;
      let dragging = false;

      let startX = 0, startY = 0;
      let startLeft = 0, startTop = 0;

      function pctX(px){ return (px / page.clientWidth)  * 100; }
      function pctY(px){ return (px / page.clientHeight) * 100; }

      function readPct(el){
        const s = el.style;
        return {
          left: parseFloat(s.left),
          top: parseFloat(s.top),
          width: parseFloat(s.width),
          height: parseFloat(s.height)
        };
      }

      function setPct(el, v){
        el.style.left = v.left.toFixed(2) + '%';
        el.style.top = v.top.toFixed(2) + '%';
        el.style.width = Math.max(0.5, v.width).toFixed(2) + '%';
        el.style.height = Math.max(0.5, v.height).toFixed(2) + '%';
      }

      function select(el){
        selected = el;
        // הדגשה לנבחר
        document.querySelectorAll('.link').forEach(x => x.style.outline = '2px solid rgba(255,0,0,0.7)');
        selected.style.outline = '3px solid rgba(0,255,255,0.9)';
        setPct(selected, readPct(selected));
      }

      document.querySelectorAll('.link').forEach(el=>{
        el.addEventListener('mousedown', (e)=>{
          e.preventDefault();      // במצב עריכה מונעים ניווט
          select(el);

          dragging = true;
          const v = readPct(el);
          startX = e.clientX; startY = e.clientY;
          startLeft = v.left; startTop = v.top;
        });
      });

      window.addEventListener('mousemove', (e)=>{
        if(!dragging || !selected) return;
        const dx = e.clientX - startX;
        const dy = e.clientY - startY;
        const v = readPct(selected);
        v.left = startLeft + pctX(dx);
        v.top  = startTop  + pctY(dy);
        setPct(selected, v);
      });

      window.addEventListener('mouseup', ()=>{ dragging = false; });

      // Resize: Shift=width, Alt=height
      window.addEventListener('wheel', (e)=>{
        if(!selected) return;
        if(!(e.shiftKey || e.altKey)) return;

        e.preventDefault();
        const v = readPct(selected);
        const step = (e.deltaY > 0) ? -0.5 : 0.5;

        if(e.shiftKey) v.width += step;
        if(e.altKey)   v.height += step;

        setPct(selected, v);
      }, { passive:false });
    }
  </script>
</body>
</html>


